{"mappings":"qBAAAA,EAAe,CAEbC,eAAgBC,SAASC,cAAc,uBACvCC,eAAgBF,SAASC,cAAc,oBAEvCE,oBAAqBH,SAASC,cAAc,wBCFxCG,EAAgBJ,SAASC,cAAc,YACvCI,EAAeL,SAASC,cAAc,YAEtCK,EAAgB,iBAEtB,E,GAAAC,oBAAmB,GAEnBT,EAAKK,oBAAoBK,iBAAiB,SAEnC,SAAuBC,GAC5B,IAAMC,EAAaC,aAAaC,QAAQN,GAClCO,EAAYJ,EAAIK,OAAOC,QAAQ,2BAC/BC,EAAgChB,SAASC,cAC7C,uBAGF,IAAKY,EACH,OAEF,IACMI,EADQC,KAAKC,MAAMT,GACFU,QACrB,SAAAC,G,IAAGC,EAAMD,EAANC,OAAQC,EAAKF,EAALE,M,OACTD,IAAWT,EAAUW,QAAQF,QAAUC,IAAUV,EAAUW,QAAQD,K,IAEjEE,EAAoBP,KAAKQ,UAAUT,GAKzC,GAHAN,aAAagB,QAAQrB,EAAemB,GAEpCG,EAAAC,QAAQC,YAAc,EAClBd,EAA8Be,SAASC,OAAS,EAAG,CACrD,IAAIC,EAAcL,EAAAM,WAAWC,iBAC7BP,EAAAM,WAAWE,MAAMR,EAAAC,QAAQC,YACzBF,EAAAM,WAAWG,WAAWJ,E,KACjB,CACL,IAAIK,EAAcV,EAAAM,WAAWC,iBAAmB,EAChDP,EAAAM,WAAWE,MAAMR,EAAAC,QAAQC,YACzBF,EAAAM,WAAWG,WAAWC,E,CAEnBV,EAAAC,QAAQC,aACX1B,EAAcmC,UAAUC,OAAO,mBAC/BnC,EAAakC,UAAUC,OAAO,mB","sources":["src/js/refs.js","src/js/onRemoveClick.js"],"sourcesContent":["export default {\n  //   books-content-by-category.js, render-book-info.js\n  contentWrapper: document.querySelector('.js-content-wrapper'),\n  backdropLoader: document.querySelector('.loader-backdrop'),\n  //   onRemoveClick.js\n  shoppingListWrapper: document.querySelector('.shopping-list-wrap'),\n};\n","import { renderShoppingList } from './renderShoppingList';\nimport { pagination, options } from './tui-pagination';\n\nconst imageForEmpty = document.querySelector('.js-back');\nconst textForEmpty = document.querySelector('.js-text');\nimport refs from './refs';\nconst SHOP_LIST_KEY = 'shopping-list';\n\nrenderShoppingList(1);\n\nrefs.shoppingListWrapper.addEventListener('click', onRemoveClick);\n\nexport function onRemoveClick(evt) {\n  const dataString = localStorage.getItem(SHOP_LIST_KEY);\n  const removeBtn = evt.target.closest('.wrap-about-book-remove');\n  const deletePaginationPageByWrapper = document.querySelector(\n    '.shopping-list-wrap'\n  );\n\n  if (!removeBtn) {\n    return;\n  }\n  const books = JSON.parse(dataString);\n  const newBooks = books.filter(\n    ({ author, title }) =>\n      author !== removeBtn.dataset.author && title !== removeBtn.dataset.title\n  );\n  const updatedDataString = JSON.stringify(newBooks);\n\n  localStorage.setItem(SHOP_LIST_KEY, updatedDataString);\n\n  options.totalItems -= 1;\n  if (deletePaginationPageByWrapper.children.length > 1) {\n    let pageCurrent = pagination.getCurrentPage();\n    pagination.reset(options.totalItems);\n    pagination.movePageTo(pageCurrent);\n  } else {\n    let pageCurrent = pagination.getCurrentPage() - 1;\n    pagination.reset(options.totalItems);\n    pagination.movePageTo(pageCurrent);\n  }\n  if (!options.totalItems) {\n    imageForEmpty.classList.remove('visually-hidden');\n    textForEmpty.classList.remove('visually-hidden');\n  }\n}\n\n"],"names":["$37e33676934ad046$export$2e2bcd8739ae039","contentWrapper","document","querySelector","backdropLoader","shoppingListWrapper","$969c52819bf71a82$var$imageForEmpty","$969c52819bf71a82$var$textForEmpty","$969c52819bf71a82$var$SHOP_LIST_KEY","renderShoppingList","addEventListener","evt","dataString","localStorage","getItem","removeBtn","target","closest","deletePaginationPageByWrapper","newBooks","JSON","parse","filter","param","author","title","dataset","updatedDataString","stringify","setItem","$8b39774b9402aaf7$exports","options","totalItems","children","length","pageCurrent","pagination","getCurrentPage","reset","movePageTo","pageCurrent1","classList","remove"],"version":3,"file":"shopping-list.3ac1d7fa.js.map"}