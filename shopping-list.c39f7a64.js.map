{"mappings":"SAAAA,EAAe,CAEbC,eAAgBC,SAASC,cAAc,uBACvCC,eAAgBF,SAASC,cAAc,oBAEvCE,oBAAqBH,SAASC,cAAc,wBCF9C,MAAMG,EAAgBJ,SAASC,cAAc,YACvCI,EAAeL,SAASC,cAAc,aAI5C,E,GAAAK,oBAAmB,GAEnBR,EAAKK,oBAAoBI,iBAAiB,SAEnC,SAAuBC,GAC5B,MAAMC,EAAaC,aAAaC,QAPZ,iBAQdC,EAAYJ,EAAIK,OAAOC,QAAQ,2BAC/BC,EAAgCf,SAASC,cAC7C,uBAGF,IAAKW,EACH,OAEF,MACMI,EADQC,KAAKC,MAAMT,GACFU,QACrB,EAACC,OAAEA,EAAMC,MAAEA,KACTD,IAAWR,EAAUU,QAAQF,QAAUC,IAAUT,EAAUU,QAAQD,QAEjEE,EAAoBN,KAAKO,UAAUR,GAKzC,GAHAN,aAAae,QAvBO,gBAuBgBF,GAEpCG,EAAAC,QAAQC,YAAc,EAClBb,EAA8Bc,SAASC,OAAS,EAAG,CACrD,IAAIC,EAAcL,EAAAM,WAAWC,iBAC7BP,EAAAM,WAAWE,MAAMR,EAAAC,QAAQC,YACzBF,EAAAM,WAAWG,WAAWJ,E,KACjB,CACL,IAAIA,EAAcL,EAAAM,WAAWC,iBAAmB,EAChDP,EAAAM,WAAWE,MAAMR,EAAAC,QAAQC,YACzBF,EAAAM,WAAWG,WAAWJ,E,CAEnBL,EAAAC,QAAQC,aACXxB,EAAcgC,UAAUC,OAAO,mBAC/BhC,EAAa+B,UAAUC,OAAO,mB","sources":["src/js/refs.js","src/js/onRemoveClick.js"],"sourcesContent":["export default {\n  //   books-content-by-category.js, render-book-info.js\n  contentWrapper: document.querySelector('.js-content-wrapper'),\n  backdropLoader: document.querySelector('.loader-backdrop'),\n  //   onRemoveClick.js\n  shoppingListWrapper: document.querySelector('.shopping-list-wrap'),\n};\n","import { renderShoppingList } from './renderShoppingList';\nimport { pagination, options } from './tui-pagination';\n\nconst imageForEmpty = document.querySelector('.js-back');\nconst textForEmpty = document.querySelector('.js-text');\nimport refs from './refs';\nconst SHOP_LIST_KEY = 'shopping-list';\n\nrenderShoppingList(1);\n\nrefs.shoppingListWrapper.addEventListener('click', onRemoveClick);\n\nexport function onRemoveClick(evt) {\n  const dataString = localStorage.getItem(SHOP_LIST_KEY);\n  const removeBtn = evt.target.closest('.wrap-about-book-remove');\n  const deletePaginationPageByWrapper = document.querySelector(\n    '.shopping-list-wrap'\n  );\n\n  if (!removeBtn) {\n    return;\n  }\n  const books = JSON.parse(dataString);\n  const newBooks = books.filter(\n    ({ author, title }) =>\n      author !== removeBtn.dataset.author && title !== removeBtn.dataset.title\n  );\n  const updatedDataString = JSON.stringify(newBooks);\n\n  localStorage.setItem(SHOP_LIST_KEY, updatedDataString);\n\n  options.totalItems -= 1;\n  if (deletePaginationPageByWrapper.children.length > 1) {\n    let pageCurrent = pagination.getCurrentPage();\n    pagination.reset(options.totalItems);\n    pagination.movePageTo(pageCurrent);\n  } else {\n    let pageCurrent = pagination.getCurrentPage() - 1;\n    pagination.reset(options.totalItems);\n    pagination.movePageTo(pageCurrent);\n  }\n  if (!options.totalItems) {\n    imageForEmpty.classList.remove('visually-hidden');\n    textForEmpty.classList.remove('visually-hidden');\n  }\n}\n\n"],"names":["$ee27a4d7c64fc8c4$export$2e2bcd8739ae039","contentWrapper","document","querySelector","backdropLoader","shoppingListWrapper","$d0ffab130c81c060$var$imageForEmpty","$d0ffab130c81c060$var$textForEmpty","renderShoppingList","addEventListener","evt","dataString","localStorage","getItem","removeBtn","target","closest","deletePaginationPageByWrapper","newBooks","JSON","parse","filter","author","title","dataset","updatedDataString","stringify","setItem","$ee65428efe2a684f$exports","options","totalItems","children","length","pageCurrent","pagination","getCurrentPage","reset","movePageTo","classList","remove"],"version":3,"file":"shopping-list.c39f7a64.js.map"}